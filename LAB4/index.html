<!DOCTYPE html>
<html>
  <head>
    <title>CSI2109-Lab4 (MainPage)</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
  </head>
  <body>
    <div class="main-container">
      <h1>CSI 영화 정보 사이트</h1>
      <nav>
        <a href="#" class="noroute">메인 페이지</a>
        <a href="login.html">로그인</a>
        <a href="signup.html">회원가입</a>
      </nav>
      <section class="keyword-filter-section">
        <input
          type="text"
          class="keyword-filter-input"
          placeholder="키워드 입력"
        />
        <button class="keyword-filter-button">검색</button>
      </section>
      <section class="main-section">
        <div class="main-section-header">Movies</div>
        <div class="sort-filter">
          <p>정렬 기준</p>
          <div class="radio-group">
            <div class="radio-group-item">
              <input type="radio" id="sort-title" name="sort" value="title" />
              <label for="sort-title">평점 내림차순</label>
            </div>

            <div class="radio-group-item">
              <input type="radio" id="sort-year" name="sort" value="year" />
              <label for="sort-year">평점 오름차순</label>
            </div>

            <div class="radio-group-item">
              <input type="radio" id="sort-rating" name="sort" value="rating" />
              <label for="sort-rating">개봉 내림차순</label>
            </div>

            <div class="radio-group-item">
              <input
                type="radio"
                id="sort-popularity"
                name="sort"
                value="popularity"
              />
              <label for="sort-popularity">개봉 오름차순</label>
            </div>
          </div>
        </div>
        <div class="movie-list"></div>
      </section>
    </div>

    <script>
      function generateMovieCard(movie) {
        const card = document.createElement("div");
        card.className = "movie-card";

        card.innerHTML = `
          <div class="movie-card">
            <img src="images/${movie.image}" alt="${
          movie.image
        }" class="movie-image" />
            <div class="movie-info">
              ${movie.overview.replaceAll('\\"', '"')}
            </div>
            <p class="movie-title">${movie.title}</p>
            <p class="movie-release">개봉일: ${movie.release_date}</p>
            <p class="movie-rating">★ ${movie.vote}</p>
          </div>
        `;

        return card;
      }

      async function loadMovies() {
        try {
          const response = await fetch("product.json");
          const movies = await response.json();

          const movieList = document.querySelector(".movie-list");
          movieList.innerHTML = "";

          console.log(movies);
          movies.forEach((movie) => {
            const movieCard = generateMovieCard(movie);
            movieList.appendChild(movieCard);
          });
        } catch (error) {
          console.error("Error loading movies:", error);
        }
      }

      window.onload = loadMovies;
    </script>
  </body>
</html>
